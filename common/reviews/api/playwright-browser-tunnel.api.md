## API Report File for "@rushstack/playwright-browser-tunnel"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { Browser } from 'playwright-core';
import { ITerminal } from '@rushstack/terminal';
import type { LaunchOptions } from 'playwright-core';
import semver from 'semver';

// @beta
export type BrowserName = 'chromium' | 'firefox' | 'webkit';

// @beta
export function createTunneledBrowserAsync(browserName: BrowserName, launchOptions: LaunchOptions, logger?: ITerminal, port?: number): Promise<IDisposableTunneledBrowser>;

// @beta
export const DENIED_LAUNCH_OPTIONS: ReadonlySet<keyof LaunchOptions>;

// @beta
export const EXTENSION_INSTALLED_FILENAME: string;

// @beta
export function getNormalizedErrorString(error: unknown): string;

// @beta
export interface IDisposableTunneledBrowser {
    [Symbol.asyncDispose]: () => Promise<void>;
    browser: Browser;
}

// @beta
export interface IDisposableTunneledBrowserConnection {
    [Symbol.dispose]: () => void;
    closePromise: Promise<void>;
    remoteEndpoint: string;
}

// @beta
export interface IHandshake {
    // (undocumented)
    action: 'handshake';
    // (undocumented)
    browserName: BrowserName;
    // (undocumented)
    launchOptions: LaunchOptions;
    // (undocumented)
    playwrightVersion: semver.SemVer;
}

// @beta
export interface ILaunchOptionsAllowlist {
    allowedOptions: string[];
    version: number;
}

// @beta
export interface ILaunchOptionsValidationResult {
    deniedOptions: Array<keyof LaunchOptions>;
    filteredOptions: LaunchOptions;
    isValid: boolean;
    warnings: string[];
}

// @beta
export type IPlaywrightTunnelOptions = {
    terminal: ITerminal;
    onStatusChange: (status: TunnelStatus) => void;
    playwrightInstallPath: string;
    onBeforeLaunch?: (handshake: IHandshake) => Promise<boolean> | boolean;
} & ({
    mode: 'poll-connection';
    wsEndpoint: string;
} | {
    mode: 'wait-for-incoming-connection';
    listenPort: number;
});

// @beta
export function isExtensionInstalledAsync(): Promise<boolean>;

// @beta
export const LAUNCH_OPTIONS_ALLOWLIST_FILENAME: string;

// @beta
export class LaunchOptionsValidator {
    static addToAllowlistAsync(option: keyof LaunchOptions): Promise<void>;
    static clearAllowlistAsync(): Promise<void>;
    static getAllowlistFilePath(): string;
    static getDeniedOptionsDescription(): string;
    static readAllowlistAsync(): Promise<ILaunchOptionsAllowlist>;
    static removeFromAllowlistAsync(option: keyof LaunchOptions): Promise<void>;
    static validateLaunchOptionsAsync(launchOptions: LaunchOptions, terminal?: ITerminal): Promise<ILaunchOptionsValidationResult>;
    static writeAllowlistAsync(allowlist: ILaunchOptionsAllowlist): Promise<void>;
}

// @beta
export class PlaywrightTunnel {
    // (undocumented)
    [Symbol.asyncDispose](): Promise<void>;
    constructor(options: IPlaywrightTunnelOptions);
    // (undocumented)
    cleanTempFilesAsync(): Promise<void>;
    // (undocumented)
    startAsync(options?: {
        keepRunning?: boolean;
    }): Promise<void>;
    // (undocumented)
    get status(): TunnelStatus;
    // (undocumented)
    stopAsync(): Promise<void>;
    // (undocumented)
    waitForCloseAsync(): Promise<void>;
}

// @beta
export function tunneledBrowserConnection(logger: ITerminal, port?: number): Promise<IDisposableTunneledBrowserConnection>;

// @beta
export type TunnelStatus = 'waiting-for-connection' | 'browser-server-running' | 'stopped' | 'setting-up-browser-server' | 'error';

```
